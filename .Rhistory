rowsum(BVI)
?bvi
?prcomp
Pr <- prcomp(daots_bvi)
Pr <- prcomp(datos_bvi)
Pr <- prcomp(datos_ivb)
?ggbiplot
library(ggbiplot)
library(dplyr)
ggbiplot(Pr)
biplot(Pr)
Pr
Pr <- prcomp(t(datos_ivb))
Pr
ggbiplot(Pr)
Pr <- prcomp(t(datos_ivb), scale =T)
ggbiplot(Pr)
library(corrplot)
corrplot(cor(datos_ivb))
corrplot(cor(datos_ivb). type = upper)
corrplot(cor(datos_ivb). type = "upper")
corrplot(cor(datos_ivb), type = "upper")
corrplot(cor(t(datos_ivb)), type = "upper")
plot(datos_ivb)
windows()
plot(datos_ivb)
plot(t(datos_ivb))
plot(t(datos_ivb))
plot(datos_ivb)
windows()
plot(datos_ivb)
plot(datos)
datos_vib
datos_ivb
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Sitio)) %>%
select(Muestra, GeneroEspecie, Abundancia) %>%
spread(Muestra, Abundancia)
rows <- unique(datos_ivb$GeneroEspecie)
datos_ivb <- as.data.frame(datos_ivb[-1])
rownames(datos_ivb) <- rows
BVI <- bvi(datos_ivb)
Pr <- prcomp(t(datos_ivb), scale =T)
bvi_plot(BVI)
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Sitio))
datos
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Sitio)) %>%
select(Muestra, GeneroEspecie, Abundancia) %>%
spread(Muestra, Abundancia)
colnames(datos)
rm(datos_ivb)
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Sitio)) %>%
select(Muestra, GeneroEspecie, Abundancia) %>%
spread(Muestra, Abundancia)
rows <- unique(datos_ivb$GeneroEspecie)
datos_ivb <- as.data.frame(datos_ivb[-1])
rownames(datos_ivb) <- rows
BVI <- bvi(datos_ivb)
Pr <- prcomp(t(datos_ivb), scale =T)
bvi_plot(BVI)
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(Abundancia = mean(Abundancia))
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie)
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(Abundancia = mean(Abundancia))
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(Abundancia = sum(Abundancia))
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(Abundancia = mean(Abundancia))
View(datos_ivb)
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(Abundancia = sum(Abundancia))
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie)
library(dplyr)
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Sitio)) %>%
select(Muestra, GeneroEspecie, Abundancia) %>%
spread(Muestra, Abundancia)
library("dplyr", lib.loc="~/R/win-library/3.2")
loadedNamespaces()
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Sitio)) %>%
select(Muestra, GeneroEspecie, Abundancia) %>%
spread(Muestra, Abundancia)
rows <- unique(datos_ivb$GeneroEspecie)
datos_ivb <- as.data.frame(datos_ivb[-1])
rownames(datos_ivb) <- rows
BVI <- bvi(datos_ivb)
Pr <- prcomp(t(datos_ivb), scale =T)
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Sitio)) %>%
select(Muestra, GeneroEspecie, Abundancia) %>%
spread(Muestra, Abundancia)
colnames(datos)
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(N = mean(Abundancia))
datos_ivb <- datos
class(datos_ivb)
class(datos)
datos_ivb <- datos %>%
ungroup()
class(datos_ivb)
abnt <- read.csv("./Datos/12082016 ISPM Especifico.csv", sep = ";", stringsAsFactors = F) %>%
mutate(NT = as.numeric(NT), a = as.numeric(a), b=as.numeric(b))
datos <- read.csv("./Datos/peces_completado.csv", sep=";")%>%
mutate(id = paste(Dia, Mes, Ano, Sitio, Transecto))
datos2 <- datos %>%
select(id, Genero, Especie, GeneroEspecie, Talla, Abundancia) %>%
complete(id, nesting(Genero, Especie, GeneroEspecie), fill = list(Talla = NA, Abundancia = 0))
datos <- datos %>%
select(-GeneroEspecie, -Talla, -Abundancia, -Genero, -Especie) %>%
group_by(id, Dia, Mes, Ano, Estado, Comunidad, Sitio, Latitud, Longitud, Habitat, Zonificacion, TipoProteccion, ANP, BuzoMonitor, HoraInicial, HoraFinal, ProfundidadInicial, ProfundidadFinal, Temperatura, Visibilidad, Corriente, Transecto) %>%
summarize(N=n()) %>%
select(-N) %>%
full_join(datos2, by ="id") %>%
left_join(abnt, by = "GeneroEspecie") %>%
mutate(Talla = as.numeric(as.character(Talla)), Abundancia = as.numeric(as.character(Abundancia))) %>%
mutate(Biomasa = Abundancia*a*(Talla^b)) %>%
mutate(TransectNumber = Transecto, Site = Comunidad, Year = Ano, Zone = Zonificacion, SizeClass = Talla) %>%
filter(!is.na(Abundancia)) %>%
ungroup()
suppressPackageStartupMessages({
library(ggplot2)
library(dplyr)
library(tidyr)
library(MPAtools)
library(reshape)
})
suppressPackageStartupMessages({
library(ggplot2)
library(dplyr)
library(tidyr)
library(MPAtools)
library(reshape)
})
suppressPackageStartupMessages({
library(ggplot2)
library(dplyr)
library(tidyr)
library(MPAtools)
library(reshape)
})
abnt <- read.csv("./Datos/12082016 ISPM Especifico.csv", sep = ";", stringsAsFactors = F) %>%
mutate(NT = as.numeric(NT), a = as.numeric(a), b=as.numeric(b))
datos <- read.csv("./Datos/peces_completado.csv", sep=";")%>%
mutate(id = paste(Dia, Mes, Ano, Sitio, Transecto))
datos2 <- datos %>%
select(id, Genero, Especie, GeneroEspecie, Talla, Abundancia) %>%
complete(id, nesting(Genero, Especie, GeneroEspecie), fill = list(Talla = NA, Abundancia = 0))
datos <- datos %>%
select(-GeneroEspecie, -Talla, -Abundancia, -Genero, -Especie) %>%
group_by(id, Dia, Mes, Ano, Estado, Comunidad, Sitio, Latitud, Longitud, Habitat, Zonificacion, TipoProteccion, ANP, BuzoMonitor, HoraInicial, HoraFinal, ProfundidadInicial, ProfundidadFinal, Temperatura, Visibilidad, Corriente, Transecto) %>%
summarize(N=n()) %>%
select(-N) %>%
full_join(datos2, by ="id") %>%
left_join(abnt, by = "GeneroEspecie") %>%
mutate(Talla = as.numeric(as.character(Talla)), Abundancia = as.numeric(as.character(Abundancia))) %>%
mutate(Biomasa = Abundancia*a*(Talla^b)) %>%
mutate(TransectNumber = Transecto, Site = Comunidad, Year = Ano, Zone = Zonificacion, SizeClass = Talla) %>%
filter(!is.na(Abundancia)) %>%
ungroup()
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(N = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Sitio)) %>%
select(Muestra, GeneroEspecie, Abundancia) %>%
spread(Muestra, Abundancia)
datos_ivb <- datos %>%
group_by(Ano, Sitio, GeneroEspecie) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Sitio)) %>%
select(Muestra, GeneroEspecie, Abundancia) %>%
spread(Muestra, Abundancia)
rows <- unique(datos_ivb$GeneroEspecie)
datos_ivb <- as.data.frame(datos_ivb[-1])
rownames(datos_ivb) <- rows
BVI <- bvi(datos_ivb)
datos_ivb
Xsq <- chisq.test(datos_ivb, correct = T)
Xsq
?chisq.test
Xsq <- chisq.test(prop.table(datos_ivb), correct = T)
Xsq
Xsq <- chisq.test(prop.table(datos_ivb, 2), correct = T)
?prop.table
m <- matrix(1:4, 2)
m
prop.table(m, 1)
colnames(bvi)
m <- matrix(1:4, 2)
m
prop.table(m, 1)
colnames(datos_ivb)
m <- matrix(1:4, 2)
m
prop.table(m, 1)
pro.ivb <- prop.table(datos_ivb,2)
pro.ivb <- prop.table(as.matrix(datos_ivb),2)
pro.ivb
head(prop.ivb)
head(pro.ivb)
sum(pro.ivb)
dim(ivb)
dim(pro.ivb)
chisq.test(pro.ivb)
datos_ivb <- datos %>%
group_by(Ano, Zonificacion, GeneroEspecie) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Sitio)) %>%
select(Muestra, GeneroEspecie, Abundancia) %>%
spread(Muestra, Abundancia)
datos_ivb <- datos %>%
group_by(Ano, Zonificacion, GeneroEspecie) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Zonificacion)) %>%
select(Muestra, GeneroEspecie, Abundancia) %>%
spread(Muestra, Abundancia)
rows <- unique(datos_ivb$GeneroEspecie)
datos_ivb <- as.data.frame(datos_ivb[-1])
rownames(datos_ivb) <- rows
BVI <- bvi(datos_ivb)
Pr <- prcomp(t(datos_ivb), scale =T)
pro.ivb <- prop.table(as.matrix(datos_ivb),2)
chisq.test(pro.ivb)
datos_ivb <- datos %>%
group_by(Ano, Zonificacion, NivelTrofico) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Zonificacion)) %>%
select(Muestra, NivelTrofico, Abundancia) %>%
spread(Muestra, Abundancia)
colnames(datos)
datos_ivb <- datos %>%
group_by(Ano, Zonificacion, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Zonificacion)) %>%
select(Muestra, NT, Abundancia) %>%
spread(Muestra, Abundancia)
datos_ivb <- datos %>%
mutate(NT = round(NT)) %>%
group_by(Ano, Zonificacion, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Zonificacion)) %>%
select(Muestra, NT, Abundancia) %>%
spread(Muestra, Abundancia)
datos_ivb <- datos %>%
mutate(NT = round(NT, na.rm=T)) %>%
group_by(Ano, Zonificacion, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Zonificacion)) %>%
select(Muestra, NT, Abundancia) %>%
spread(Muestra, Abundancia)
round(2.5)
round(2.7)
floor(2.7)
datos_ivb <- datos %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, Zonificacion, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Zonificacion)) %>%
select(Muestra, NT, Abundancia) %>%
spread(Muestra, Abundancia)
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca") %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
mutate(Muestra = paste (Ano, Zonificacion)) %>%
select(Muestra, NT, Abundancia) %>%
spread(Muestra, Abundancia)
colnames(datos)
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca")
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca") %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
select(Ano, NT, Abundancia) %>%
spread(Ano, Abundancia)
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca") %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT) %>%
summarize(Abundancia = mean(Abundancia))
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca") %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
select(Ano, NT, Abundancia)
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca") %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
select(Ano, NT, Abundancia) %>%
spread(Ano, Abundancia)
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca") %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
select(Ano, NT, Abundancia)
rm(datos_ivb)
View(NT_P)
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca") %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT) %>%
summarize(Abundancia = mean(Abundancia))
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca") %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT)
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca") %>%
mutate(NT = floor(NT))
unique(datos$Zonificacion)
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca")
rm(NT_P)
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca")
unique(datos$Zonificacion)
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca ")
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca ") %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
select(Ano, NT, Abundancia) %>%
spread(Ano, Abundancia)
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca ") %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
select(Ano, NT, Abundancia) %>%
spread(Ano, Abundancia) %>%
prop.table(2)
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca ") %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
select(Ano, NT, Abundancia) %>%
spread(Ano, Abundancia)
rows <- unique(datos_ivb$NT)
NT_P <- as.data.frame(datos_ivb[-1])
rownames(datos_ivb) <- rows
pro.NT_P<- prop.table(as.matrix(datos_ivb),2)
Xsq <- chisq.test(pro.ivb)
Pr <- prcomp(t(datos_ivb), scale =T)
biplot(Pr)
NT_P <- datos %>%
filter (Zonificacion == "Zona de Pesca ") %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
select(Ano, NT, Abundancia) %>%
spread(Ano, Abundancia)
rows <- unique(NT_P$NT)
NT_P <- as.data.frame(NT_P[-1])
rownames(NT_P) <- rows
pro.NT_P<- prop.table(as.matrix(NT_P),2)
Xsq <- chisq.test(pro.ivb)
Pr <- prcomp(t(datos_ivb), scale =T)
biplot(Pr)
rows
NT_P <- datos %>%
filter(Zonificacion == "Zona de Pesca ") %>%
filter(!is.na(NT)) %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
select(Ano, NT, Abundancia) %>%
spread(Ano, Abundancia)
rows <- unique(NT_P$NT)
NT_P <- as.data.frame(NT_P[-1])
rownames(NT_P) <- rows
pro.NT_P<- prop.table(as.matrix(NT_P),2)
Xsq <- chisq.test(pro.ivb)
Pr <- prcomp(t(datos_ivb), scale =T)
biplot(Pr)
NT_P <- datos %>%
filter(Zonificacion == "Zona de Pesca ") %>%
filter(!is.na(NT)) %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
select(Ano, NT, Abundancia) %>%
spread(Ano, Abundancia)
rows <- unique(NT_P$NT)
NT_P <- as.data.frame(NT_P[-1])
rownames(NT_P) <- rows
pro.NT_P<- prop.table(as.matrix(NT_P),2)
Xsq <- chisq.test(pro.ivb)
Pr <- prcomp(t(NT_P), scale =T)
biplot(Pr)
Xsq
View(pro.NT_P)
Xsq <- chisq.test(pro.ivb, correct = T)
Xsq
summary(Xsq)
Xsq
NT_P <- datos %>%
filter(Zonificacion == "Zona de Pesca ") %>%
filter(!is.na(NT)) %>%
mutate(NT = floor(NT)) %>%
group_by(Ano, NT) %>%
summarize(Abundancia = mean(Abundancia)) %>%
ungroup() %>%
select(Ano, NT, Abundancia)
library(ggplot)
library(ggplot2)
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, col = NT))+
geom_point()+
geom_line()
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, col = NT, factor = NT))+
geom_point()+
geom_line()
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, col = NT, groups = NT))+
geom_point()+
geom_line()
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, col = NT))+
geom_point()
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, col = NT))+
geom_point()+
geom_line(col = NT)
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, col = NT))+
geom_point()+
geom_line(aes(col = NT))
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, col = NT))+
geom_point()
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, col = NT))+
geom_line(aes(col = NT))
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, col = NT))+
geom_line(aes(col = NT, factor = NT))+
geom_point()
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, color = NT))+
geom_line(aes(col = NT, factor = NT))+
geom_point()
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, col = NT), color = NT)+
geom_line(aes(col = NT, factor = NT))+
geom_point()
?ggplot
?aes
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, col = factor(NT)))+
geom_line(aes(col = NT, factor = NT))+
geom_point()
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, col = as.factor(NT)))+
geom_line(aes(col = NT, factor = NT))+
geom_point()
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, col = as.factor(NT)))+
geom_line()
ggplot(data = NT_P, aes(x = Ano, y = Abundancia, col = as.factor(NT)))+
geom_line()+
geom_point()
NT_P
